#!/usr/bin/env bash

echo -e "\nCloning GitHub projects..."

PROJECTS_PREFIX="$HOME/Projects"
HEROKU_SSH_PREFIX="$HOME/.ssh/heroku-javierjulio_rsa"

projects=( website textarea-autosize browser-bug-reports exercism node-hello-world sinatra-blog )

for project in "${projects[@]}"; do
  git clone "https://github.com/javierjulio/$project.git" "$PROJECTS_PREFIX/$project" &>/dev/null
  if [ $? -ne 0 ]; then
    echo "$project already exists."
  else
    echo "Cloned $project successfully."
  fi
done

if [ -f $HEROKU_SSH_PREFIX ]; then
  echo -e "\nHeroku SSH key already exists locally."
else
  echo -e "\nSetup SSH key with retrieved Heroku passphrase ...\n"
  
  ssh-keygen -t rsa -C "jjfutbol@gmail.com" -f "$HEROKU_SSH_PREFIX"
  
  echo -e "\nAdd SSH key locally so Heroku CLI functions ...\n"
  
  ssh-add -K $HEROKU_SSH_PREFIX
  
  heroku login
  heroku keys:add
fi
